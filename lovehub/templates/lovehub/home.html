{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Little World ğŸ’–</title>
    <link rel="stylesheet" href="{% static 'lovehub/styles.css' %}">
</head>
<body>

<div class="container">
    <div class="header">
        <h1>Welcome!!!, {{ request.user.username }}! ğŸ’•</h1>
        <p class="subtitle">Your special place on the internet âœ¨</p>
        
        <div class="nav">
            <a href="{% url 'home' %}" class="btn active">ğŸ  Home</a>
            <a href="{% url 'memories' %}" class="btn">ğŸ“¸ Memories</a>
            <a href="{% url 'love_notes' %}" class="btn">
                ğŸ’Œ Love Notes
                {% if unread_notes_count > 0 %}
                    <span class="badge">{{ unread_notes_count }}</span>
                {% endif %}
            </a>
            <a href="{% url 'important_dates' %}" class="btn">ğŸ“… Dates</a>
            <a href="{% url 'love_letters' %}" class="btn">ğŸ’ Letters</a>
            <a href="{% url 'about' %}" class="btn">ğŸ’– About</a>
            <a href="{% url 'logout' %}" class="btn logout-btn">ğŸšª Logout</a>
        </div>
    </div>

    <!-- Love Letters Hover Section -->
    {% if love_letters %}
    <div class="love-letters-section">
        <h2 style="text-align: center; color: #e91e63; margin-bottom: 20px;">
            âœ¨ Hover over the letters to read them âœ¨
        </h2>
        <div class="letters-container">
            {% for letter in love_letters %}
            <div class="letter-emoji">
                <span class="emoji">{{ letter.emoji }}</span>
                <div class="letter-popup">
                    <div class="letter-header">{{ letter.title }}</div>
                    <div class="letter-content">{{ letter.content }}</div>
                    <div class="letter-footer">- {{ letter.created_by.username }} ğŸ’•</div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <div class="grid">
        <div class="card">
            <h2>ğŸ“… Upcoming Dates</h2>
            {% if upcoming_dates %}
                {% for date in upcoming_dates %}
                    <div class="memory-preview">
                        <strong>{{ date.title }}</strong><br>
                        <small>{{ date.date }} ({{ date.days_until }} days)</small>
                        {% if date.description %}
                        <p style="margin-top: 5px; color: #666;">{{ date.description }}</p>
                        {% endif %}
                    </div>
                {% endfor %}
                <a href="{% url 'important_dates' %}" class="btn" style="margin-top: 15px;">View All</a>
            {% else %}
                <p>No upcoming dates yet! Add some special days to remember ğŸ’</p>
                <a href="{% url 'important_dates' %}" class="btn" style="margin-top: 15px;">Add Date</a>
            {% endif %}
        </div>

        <div class="card">
            <h2>ğŸ’­ Recent Memories</h2>
            {% if recent_memories %}
                {% for memory in recent_memories %}
                    <div class="memory-preview">
                        <strong>{{ memory.title }}</strong><br>
                        <small>{{ memory.date }}</small>
                    </div>
                {% endfor %}
                <a href="{% url 'memories' %}" class="btn" style="margin-top: 15px;">View All</a>
            {% else %}
                <p>Start creating beautiful memories together! ğŸŒ¸</p>
                <a href="{% url 'memories' %}" class="btn" style="margin-top: 15px;">Add Memory</a>
            {% endif %}
        </div>

        <div class="card">
            <h2>ğŸ’Œ Love Notes</h2>
            {% if unread_notes_count > 0 %}
                <p>You have <strong>{{ unread_notes_count }}</strong> new love note(s)! ğŸ’•</p>
            {% else %}
                <p>No new notes. Maybe send one? ğŸ˜Š</p>
            {% endif %}
            <a href="{% url 'love_notes' %}" class="btn" style="margin-top: 15px;">
                {% if unread_notes_count > 0 %}Read Notes{% else %}Send Note{% endif %}
            </a>
        </div>
    </div>

    <!-- Beautiful Ending Message -->
    <div class="ending-message">
        <div class="hearts-decoration">ğŸ’• ğŸ’– ğŸ’— ğŸ’ ğŸ’</div>
        <p class="ending-text">
            If you ever forget how loved you areâ€¦ come back here.<br>
            <strong>This website is proof.</strong>
        </p>
        <div class="hearts-decoration">ğŸ’ ğŸ’ ğŸ’— ğŸ’– ğŸ’•</div>
    </div>
</div>

</body>
</html>